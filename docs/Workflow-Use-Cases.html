<!DOCTYPE html>
<html>
<head>
    <title>Caltech Library's Digital Library Development Sandbox</title>
    <link rel="stylesheet" href="/css/site.css">
    <base href="/AndOr">
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="../">README</a></li>
<li><a href="../license.html">LICENSE</a></li>
<li><a href="../install.html">INSTALL</a></li>
<li><a href="./">Documentation</a>
<!-- + [Github](https://github.com/caltechlibrary/AndOr) -->
<!-- + [Releases](https://github.com/caltechlibrary/AndOr/releases/) --></li>
</ul>

</nav>

<section>
<h1>Workflow Use Cases</h1>

<p>Below are use cases exploring how a workflow queue permissioned
system could be used.</p>

<h2>Use case 1</h2>

<p>We would like people (e.g. Jane) to currate the collection.
To currate the whole collection Jane needs to have the
following permissions&ndash; create, read, update, delete,
change workflow queues, and to list all objects
in the collection. To do that we can create a workflow queue called
&ldquo;currators&rdquo;.</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Currators&quot;,
        &quot;workflow_id&quot;: &quot;currators&quot;
        &quot;object_permissions&quot;: [
            &quot;create&quot;,
            &quot;read&quot;,
            &quot;update&quot;
        ]
        &quot;assign_to&quot;: [ &quot;*&quot; ],
        &quot;view_object_ids&quot;: [ &quot;*&quot; ]
    }
</code></pre>

<p>Notice that we have lists for the &ldquo;assign_to&rdquo; &ldquo;view_object_ids&rdquo; as
well as &ldquo;object_permissions&rdquo;.  If the list contains
a string with an asterisks any workflow will be matched.
The alternative would be to list specific workflow queues, owners.</p>

<p>Jane needs to be a currator. We need to create a user record for her
and to make her a member of the &ldquo;currators&rdquo; workflow queue.  Jane&rsquo;s email address
is &ldquo;jane@example.edu&rdquo; so we use that as her user id. Jane&rsquo;s user
object would look like.</p>

<p>&rdquo;&lsquo;json
    {
        &ldquo;user_id&rdquo;: &ldquo;jane@example.edu&rdquo;,
        &ldquo;display_name&rdquo;: &ldquo;Jane&rdquo;,
        &ldquo;create_objects_as&rdquo;: &ldquo;currators&rdquo;,
        &ldquo;member_of&rdquo;: [ &ldquo;currators&rdquo; ]
    }
&ldquo;&rsquo;</p>

<p>When Jane authenticates with the system she goes from being
&ldquo;anonymous&rdquo; to &ldquo;jane@example.edu&rdquo; user.  This means she now has the
permissions of a currator. If she creates an object the object will
be assigned to the &ldquo;currators&rdquo; workflow queue. Since
the currators workflow queue has change workflow queue permissions for any workflow queue of objects
in the collection can take any action with any object as needed.</p>

<h2>Use case 2</h2>

<p>We would like the public to be able to view the &ldquo;published&rdquo; contents
of the of our collection. We can do this by creating a workflow queue called
&ldquo;published&rdquo;. The published workflow queue will be given read access to the
objects. It&rsquo;ll be allowed to list objects in the &ldquo;published&rdquo; workflow queue.</p>

<p>The workflow queue object would look like</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Published&quot;,
        &quot;workflow_id&quot;: &quot;published&quot;
        &quot;collection_permissions&quot;: [
            &quot;read&quot;
        ]
        &quot;assign_to&quot;: [],
        &quot;view_object_ids&quot;: [ &quot;published&quot; ]
    }
</code></pre>

<p>Any member of &ldquo;published&rdquo; will be able to read and objects
associated with &ldquo;published&rdquo; workflow queue.</p>

<p>Now we need to explicitly associated &ldquo;anonymous&rdquo;
with the &ldquo;published&rdquo; workflow queue.</p>

<pre><code class="language-json">    {
        &quot;userid&quot;: &quot;anonymous&quot;,
        &quot;display_name&quot;: &quot;Public&quot;,
        &quot;create_objects_as&quot;: null,
        &quot;member_of&quot;: [ &quot;published&quot; ]
    }
</code></pre>

<p>When anonymous goes to access an object and the workflow queue associated with
the object is &ldquo;published&rdquo; then anonymous will be able to read the object.
Likewise anonymous is not a member of any other workflow queues so they will
have no permissions to access them.</p>

<h2>Use case 3</h2>

<p>We want to allow anonymous users to &ldquo;deposit&rdquo; objects.  We can
create a workflow queue called &ldquo;deposit&rdquo;. It should only have create
permissions.  If we add &ldquo;anonymous&rdquo; to the &ldquo;deposit&rdquo; workflow queue
we could then allow the public to submit records but nothing else.
If anonymous is a member of &ldquo;published&rdquo; they will be able to still
read all published records.</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Depositor&quot;,
        &quot;workflow_id&quot;: &quot;deposit&quot;,
        &quot;object_permissions&quot;: [ &quot;create&quot; ]
        &quot;assign_to&quot;: [],
        &quot;view_object_ids&quot;: []
    }
```.

Now if we update our &quot;anonymous&quot; user we can add them to 
the &quot;deposit&quot; workflow queue and associate the created object with
a workflow queue called &quot;deposit&quot;.

```json
    {
        &quot;userid&quot;: &quot;anonymous&quot;,
        &quot;display_name&quot;: &quot;Public&quot;,
        &quot;create_objects_as&quot;: &quot;deposit&quot;,
        &quot;member_of&quot;: [ &quot;published&quot;, &quot;deposit&quot; ]
    }
</code></pre>

<p>Because the object created will have the workflow queue &ldquo;deposit&rdquo; and
our &ldquo;currators&rdquo; workflow queue has permissions to list all objects workflow queues
we can treat the &ldquo;deposit&rdquo; workflow queue a an inbox to be processed.
If the currators approved the deposit they can change the objects&rsquo;
workflow queue to &ldquo;published&rdquo;.</p>

<h2>Use case 4</h2>

<p>Creating workflows with workflow queues. We would like our objects to travel
through the following states - deposit, review, then either be
flagged with publish, embargo, and needs curration.</p>

<p>Here are some of our policies we want to enforce.</p>

<ol>
<li>Allow any authenticated user to deposit</li>
<li>Allow reviewers to choose between the following status &ndash; deposit, review, published, embargo, rejected and needs further curration</li>
<li>If &ldquo;needs curration&rdquo; is chosen then the reviewer should no longer be able to see the object</li>
<li>The depositor should not see the object after it is &ldquo;deposited&rdquo;</li>
<li>Reviewers should not be able to change an object only change the workflow queue</li>
<li>Reviewers can&rsquo;t create new objects</li>
</ol>

<p>Jane is a currator. Millie is a reviewer. Millie should not be able
to update the objects but she should be able to list objects that
have been deposited and change objects and workflow queue on an
object to As</p>

<p>Jane is already in the currators workflow queue previously defined. We need
to define a reviewer workflow queue. Millie will need to be created and be
a member of &ldquo;reviewer&rdquo;.</p>

<pre><code class="language-json">        &quot;workflow_name&quot;: &quot;Reviewer&quot;,
        &quot;workflow_id&quot;: &quot;review&quot;,
        &quot;object_permissions&quot;: [ &quot;read&quot; ]
        &quot;assign_to&quot;: [ 
            &quot;deposit&quot;, 
            &quot;review&quot;, 
            &quot;published&quot;, 
            &quot;embargo&quot;,  
            &quot;rejected&quot;,
            &quot;currators&quot;
            ],
        &quot;view_object_ids&quot;: [
            &quot;deposit&quot;,
            &quot;review&quot;,
            &quot;published&quot;,
            &quot;embargo&quot;,
            &quot;rejected&quot;
        ]
</code></pre>

<p>Millie&rsquo;s email is &ldquo;mille@example.edu&rdquo;, her account would look like</p>

<pre><code class="language-json">    {
        &quot;display_name&quot;: &quot;Millie&quot;,
        &quot;userid&quot;: &quot;millie@example.edu&quot;,
        &quot;create_objects_as&quot;: null,
        &quot;member_of&quot;: [ &quot;reviewer&quot; ]
    }
</code></pre>

<p>If later we deside Millie should be able to create objects then
we can add her the deposit workflow queue. She would not be able to
edit her deposits but she could change the workflow queue value and list it.</p>

<h2>Use case 5</h2>

<p>We want a four level review process. Writers can create
objects and edit them until they pass them on for review.
The reviewer can either send them back to the writers or pass
them on to the editors for further editing.  Editors can
pass them back to the reviewers or writers or bump them up
to the publisher. Editors can make changes to the
objects. Publishers can do anything.</p>

<ul>
<li>Jane is a publisher, jane@example.org</li>
<li>Millie is a editor, millie@example.org</li>
<li>Alfred is an reviewer, alfred@example.org</li>
<li>Olive is a writer, olive@example.org</li>
</ul>

<p>In this use case Olive needs to be able to edit her
deposits but not someone elses. We can do this by
create an &ldquo;olive&rdquo; workflow queue which and having that as
the default workflow queue when she creates a new object.
We can also associate olive with the writer workflow queue
which can change permissions to reviewer.</p>

<p>Here is Olive&rsquo;s workflow queue</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Olive&quot;,
        &quot;workflow_id&quot;: &quot;olive&quot;,
        &quot;object_permissions&quot;: [ 
            &quot;create&quot;, 
            &quot;read&quot;, 
            &quot;update&quot; 
             
        ],
        &quot;assign_to&quot;: [ ],
        &quot;view_object_ids&quot;: [
            &quot;olive&quot;
        ]
    }
</code></pre>

<p>Here is the general writer&rsquo;s workflow queue object</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Writer&quot;,
        &quot;workflow_id&quot;: &quot;writer&quot;,
        &quot;object_permissions&quot;: [],
        &quot;assign_to&quot;: [ 
            &quot;reviewer&quot;
        ],
        &quot;view_object_ids&quot;: []
    }
</code></pre>

<p>Here is Olive&rsquo;s user object</p>

<pre><code class="language-json">    {
        &quot;display_name&quot;: &quot;Olive&quot;,
        &quot;userid&quot;: &quot;olive@example.edu&quot;,
        &quot;create_objects_as&quot;: &quot;olive&quot;,
        &quot;member_of&quot;: [ &quot;olive&quot;, &quot;writer&quot; ]
    }
</code></pre>

<p>Olive&rsquo;s workflow is then to create, edit update or delete
any object with a workflow queue of &ldquo;olive&rdquo; (her objects) and because
she is a member of the writer&rsquo;s workflow queue she has permission to
change the ownership of her object to &ldquo;reviewer&rdquo;. At this
point she will not be able to see or change the object. It is
now the reviewer&rsquo;s responsibility to do something with that object.</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Reviewer&quot;,
        &quot;workflow_id&quot;: &quot;reviewer&quot;,
        &quot;object_permissions&quot;: [ read ],
        &quot;assign_to&quot;: [ 
            &quot;editor&quot;,
            &quot;reviewer&quot;,
            &quot;olive&quot;
        ],
        &quot;view_object_ids&quot;: [
            &quot;reviewer&quot;,
            &quot;olive&quot;
        ]
    }
</code></pre>

<p>Our reviewer can either pass the object on to the editor,
leave it in the review queue or pass it back to Olive our
writer.</p>

<p>The editor is allowed to change the object and the editor
is allowed to pass the object back down the workflow. The
editor workflow queue would look like</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Editor&quot;,
        &quot;workflow_id&quot;: &quot;editor&quot;,
        &quot;object_permissions&quot;: [ 
            &quot;create&quot;,
            &quot;read&quot;, 
            &quot;update&quot; 
        ],
        &quot;assign_to&quot;: [  
            &quot;editor&quot;,
            &quot;rejected&quot;,
            &quot;burried&quot;,
            &quot;publisher&quot;,
            &quot;reviewer&quot;, 
            &quot;writer&quot;, 
            &quot;olive&quot;,
        ],
        &quot;view_object_ids&quot;: [
            &quot;olive&quot;,
            &quot;writer&quot;,
            &quot;reviewer&quot;,
            &quot;editor&quot;,
            &quot;rejected&quot;,
            &quot;burried&quot;,
        ]
    }
</code></pre>

<p>And finally the publisher has permissions on everything.</p>

<pre><code class="language-json">    {
        &quot;workflow_name&quot;: &quot;Publisher&quot;,
        &quot;workflow_id&quot;: &quot;publisher&quot;,
        &quot;object_permissions&quot;: [
            &quot;create&quot;,
            &quot;read&quot;,
            &quot;update&quot;
        ],
        &quot;assign_to&quot;: [ &quot;*&quot; ],
        &quot;view_object_ids&quot;: [ &quot;*&quot; ]
    }
</code></pre>

</section>

<footer>
<span><h1><A href="https://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2019 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
<!-- START: PrettyFi from https://github.com/google/code-prettify -->
<script>
/* We want to add the class "prettyprint" to all the pre elements */
var pre_list = document.querySelectorAll("pre");

pre_list.forEach(function(elem) {
    elem.classList.add("prettyprint");
    elem.classList.add("linenums");/**/
    elem.classList.add("json"); /**/
});
</script>
<style>
li.L0, li.L1, li.L2, li.L3, li.L4, li.L5, li.L6, li.L7, li.L8, li.L9
{
    color: #555;
    list-style-type: decimal;
}
</style>
<link rel="stylesheet" type="text/css" href="prettify.css">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<!--  END: PrettyFi from https://github.com/google/code-prettify -->
</body>
</html>
