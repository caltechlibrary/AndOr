<!DOCTYPE html>
<html>
<head>
    <title>Caltech Library's Digital Library Development Sandbox</title>
    <link rel="stylesheet" href="/AndOr/css/site.css">
    <!-- <link rel="stylesheet" href="/css/site.css"> -->
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="/AndOr/assets/liblogo.gif" alt="Caltech Library logo"></a>
<!-- <a href="https://library.caltech.edu"><img src="/assets/liblogo.gif" alt="Caltech Library logo"></a> -->
</header>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="../">README</a></li>
<li><a href="../license.html">LICENSE</a></li>
<li><a href="../install.html">INSTALL</a></li>
<li><a href="./">Documentation</a>
<!-- + [Github](https://github.com/caltechlibrary/AndOr) -->
<!-- + [Releases](https://github.com/caltechlibrary/AndOr/releases/) --></li>
</ul>

</nav>

<section>
<h1>User Scheme</h1>

<p>While <strong>AndOr</strong> manages users outside the web UI it still
needs to keep track os basic information.</p>

<p>Below is an example JSON document describing the user Jane Doe.</p>

<pre><code class="language-json">    {
        &quot;user_id&quot;: &quot;jane.doe@example.edu&quot;,
        &quot;display_name&quot;: &quot;Jane Doe&quot;,
        &quot;create_objects_as&quot;: &quot;writer&quot;,
        &quot;member_of&quot;: [ &quot;publisher&quot;, &quot;editor&quot;, &quot;writer&quot; ]
    }
</code></pre>

<p>The JSON documents hold four pieces of information</p>

<dl>
<dt>user_id</dt>
<dd>(string, required) in this case an email address is a unique string used to map a user to their assigned workflows</dd>
<dt>display_name</dt>
<dd>(string, optional) a display name, a convenience field for us Humans when IDs like an ORCID are less obvious</dd>
<dt>create_objects_as</dt>
<dd>(string, optional, defaults to null) if not null assigns the workflow value when an object is created (NOTE: workflow needs to allow creating objects)</dd>
<dt>member_of</dt>
<dd>(list of strings, defaults to empty list) this lists the workflows available to this user. If workflow specified is &ldquo;*&rdquo; it means the user is a member of all workflows, their for has all defined permissions</dd>
</dl>

<h2>How the user object is used</h2>

<p>When Jane authenticates with the system she goes from being
&ldquo;anonymous&rdquo; to &ldquo;jane@example.edu&rdquo; user.  This means she now has the
permissions associated with &ldquo;publisher&rdquo;, &ldquo;editor&rdquo; and &ldquo;writer&rdquo; workflows.
If Jane creates a new object it will be created in the &ldquo;writer&rdquo; workflow.
Note if Jane doesn&rsquo;t have an have any workflows defined she would
have zero permissions to access any objects. Each workflow list in
&ldquo;member_of&rdquo; establishes the permissions under which she can see objects.</p>

<h2>anonymous, the default user</h2>

<p>There is always a &ldquo;anonymous&rdquo; user defined. It is used for anyone who
has not authenticated.  While the &ldquo;anonymous&rdquo; user is assumed to always
exist it is not provided with any workflows. If you want to allow
anonymous access to a collection (e.g. the general public can see
&ldquo;published&rdquo; objects) then you should create a JSON record for the
&ldquo;anonymous&rdquo; user and explicitly put them in a single workflow that
only has read permissions for &ldquo;published&rdquo; objects. See <a href="Workflow-Use-Cases.html">Workflow Use Cases</a> for example.</p>

<h2>Picking IDs</h2>

<p>You can avoid the toxic storage of secrets by using an external
authentication mechanism (e.g. OAuth 2) as well as limiting the
value of your Unique id.  If you create users using an email address
you do have some value but probably minimal value if that same
email address is publicly known (e.g. published in the
institute directory).  This would be similar if you were using
an ORCID as an identifier. ORCID is a nice choice because while
the number is listable at <a href="https://orcid.org">orcid.org</a> the
ORCID owner controls directly how much information is exposed.
<strong>AndOr</strong> only needs to assert a users&rsquo; claim they control
the ID it doesn&rsquo;t harvest any data from the ID provider.</p>

</section>

<footer>
<span><h1><A href="https://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2019 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
<!-- START: PrettyFi from https://github.com/google/code-prettify -->
<script>
/* We want to add the class "prettyprint" to all the pre elements */
var pre_list = document.querySelectorAll("pre");

pre_list.forEach(function(elem) {
    elem.classList.add("prettyprint");
    elem.classList.add("linenums");/**/
    elem.classList.add("json"); /**/
});
</script>
<style>
li.L0, li.L1, li.L2, li.L3, li.L4, li.L5, li.L6, li.L7, li.L8, li.L9
{
    color: #555;
    list-style-type: decimal;
}
</style>
<link rel="stylesheet" type="text/css" href="/css/prettify.css">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<!--  END: PrettyFi from https://github.com/google/code-prettify -->
</body>
</html>
